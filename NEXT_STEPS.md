# 다음 단계 작업 가이드

**업데이트**: 2024년 12월  
**현재 상태**: 기본 리소스 정리 및 타입 안정성 개선 완료

## 🎯 즉시 실행 가능한 다음 작업 (우선순위순)

### 1. 데이터 검증 강화 (우선순위: 높음)
**예상 시간**: 2-3시간  
**목적**: 사용자 입력 및 데이터 저장 시 타입/범위 검증

**작업 내용**:
- Zod 라이브러리 설치 및 설정
- 데이터 스키마 정의 (LeagueClass, Tournament, PapsClass, ProgressClass 등)
- Manager의 데이터 저장/로드 시 검증 로직 추가
- 잘못된 데이터 입력 시 사용자 친화적 에러 메시지 표시

**필요 파일**:
- `src/modules/validators.ts` (새 파일)
- 각 Manager에 검증 로직 통합

**효과**:
- 런타임 에러 감소
- 데이터 무결성 보장
- 사용자 경험 개선

---

### 2. 사용자 친화적 에러 메시지 시스템 (우선순위: 높음)
**예상 시간**: 1-2시간  
**목적**: 기술적 에러를 사용자가 이해할 수 있는 메시지로 변환

**작업 내용**:
- 에러 타입별 메시지 매핑
- 에러 표시 UI 컴포넌트 생성
- Manager의 에러 발생 시 일관된 형식으로 표시
- 성공/경고/에러 토스트 알림 시스템

**필요 파일**:
- `src/modules/errorHandler.ts` (새 파일 또는 확장)
- `src/modules/notifications.ts` (새 파일)

**효과**:
- 사용자 경험 개선
- 디버깅 용이성 향상

---

### 3. 핵심 비즈니스 로직 모듈 테스트 추가 (우선순위: 중간)
**예상 시간**: 4-6시간  
**목적**: 테스트 커버리지 향상 (현재 ~25% → 목표 50%+)

**작업 내용**:
1. **AuthManager 테스트** (인증 로직 중요)
   - 로그인/로그아웃 시나리오
   - 에러 처리
   
2. **DataManager 테스트** (데이터 저장/로드 핵심)
   - Firestore 저장/로드
   - LocalStorage 폴백
   - 에러 처리

3. **PapsManager 테스트** (복잡한 비즈니스 로직)
   - 등급 계산 로직
   - 랭킹 시스템
   - 데이터 검증

**필요 파일**:
- `src/modules/authManager.test.ts` (새 파일)
- `src/modules/dataManager.test.ts` (새 파일)
- `src/modules/papsManager.test.ts` (새 파일)

**효과**:
- 코드 신뢰성 향상
- 리팩토링 안정성 확보
- 버그 조기 발견

---

### 4. 에러 리포팅 시스템 도입 (우선순위: 중간)
**예상 시간**: 2-3시간  
**목적**: 프로덕션 환경에서 발생하는 에러 추적

**작업 내용**:
- Sentry 또는 유사 서비스 통합
- 에러 수집 및 분석
- 사용자 컨텍스트 정보 수집
- 에러 알림 설정

**선택 사항**:
- Sentry (추천)
- Rollbar
- Bugsnag

**효과**:
- 프로덕션 에러 추적
- 문제 발생 시 빠른 대응
- 사용자 영향도 파악

---

### 5. 코드 중복 제거 (우선순위: 낮음)
**예상 시간**: 1-2시간  
**목적**: 유지보수성 향상

**작업 내용**:
- `setInnerHTMLSafe` 메서드를 Utils 모듈로 통합
- 모든 Manager에서 중복 제거
- 에러 처리 패턴 통합

**효과**:
- 코드 일관성 향상
- 유지보수 용이

---

## 📋 단기 개선 사항 (1-2주)

### 6. 보안 강화
- 사용자 입력 검증 강화 (Zod 스키마와 연계)
- XSS 방지 재검토 (DOMPurify 사용 확인)
- Firebase 보안 규칙 재검토

### 7. 접근성 (A11y) 개선
- ARIA 레이블 추가
- 키보드 내비게이션 지원
- 스크린 리더 호환성

### 8. 로깅 시스템 전환 완료
- 모든 모듈의 `console.log`를 `logger`로 전환
- 프로덕션 빌드에서 불필요한 로그 제거

---

## 🔄 중기 개선 사항 (1-2개월)

### 9. 성능 최적화
- 번들 크기 분석 및 최적화
- 코드 스플리팅 (Manager 모듈 동적 import)
- 가상 스크롤링 (대량 데이터 렌더링)
- 디바운싱 최적화

### 10. E2E 테스트
- Playwright 또는 Cypress 도입
- 주요 사용자 시나리오 테스트

---

## 🚀 장기 개선 사항 (3개월+)

### 11. CI/CD 파이프라인
- GitHub Actions 설정
- 자동화된 테스트 실행
- 자동화된 배포

### 12. 모니터링
- 성능 모니터링 (Web Vitals)
- 사용자 행동 추적
- 분석 대시보드

---

## 🎯 추천 다음 작업 순서

### 즉시 시작 (오늘/내일)
1. **데이터 검증 강화** - 가장 빠르게 큰 효과를 볼 수 있음
2. **사용자 친화적 에러 메시지** - 사용자 경험 개선

### 이번 주 내
3. **핵심 모듈 테스트 추가** - 코드 신뢰성 향상
4. **에러 리포팅 시스템** - 프로덕션 모니터링

### 다음 주
5. **코드 중복 제거** - 코드 품질 향상
6. **보안 강화** - 보안 취약점 제거

---

## 📝 작업 시작 전 체크리스트

- [ ] 현재 작업 중인 브랜치 확인
- [ ] 최신 코드 pull/push
- [ ] 테스트 실행하여 현재 상태 확인
- [ ] 작업할 항목 선택 및 우선순위 확인

---

## 💡 작업 진행 팁

1. **작은 단계로 나누기**: 큰 작업을 작은 단위로 분할
2. **테스트 작성**: 새 기능 추가 시 테스트 병행
3. **커밋 자주 하기**: 의미 있는 단위로 커밋
4. **문서 업데이트**: 변경 사항 문서화

---

**다음 작업 권장**: 데이터 검증 강화 (Zod 도입)

이 작업부터 시작하시겠습니까?


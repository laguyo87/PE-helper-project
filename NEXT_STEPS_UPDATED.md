# 다음 단계 작업 가이드 (업데이트)

**업데이트**: 2024년 12월  
**현재 상태**: 데이터 검증, 토스트 알림, validators 테스트 완료

## ✅ 완료된 작업

1. ✅ **데이터 검증 강화** - Zod 라이브러리 도입 및 모든 Manager에 검증 로직 추가
2. ✅ **토스트 알림 시스템** - 사용자 친화적인 비차단 알림 구현
3. ✅ **validators 테스트** - 검증 로직 테스트 추가 (12개 테스트 통과)

## 🎯 다음 단계 작업 (우선순위순)

### 1. 코드 중복 제거 (우선순위: 높음) ⏳
**예상 시간**: 1-2시간  
**현재 상태**: `setInnerHTMLSafe`가 여러 Manager에 중복 구현됨

**작업 내용**:
- `setInnerHTMLSafe` 메서드를 Utils 모듈로 통합
- 모든 Manager에서 중복 코드 제거
- DOMPurify 사용 확인 및 통일

**적용 대상**:
- `LeagueManager`
- `PapsManager`
- 기타 Manager들

**효과**:
- 코드 일관성 향상
- 유지보수 용이 (한 곳에서 수정)
- 버그 수정 용이

---

### 2. 핵심 모듈 테스트 추가 (우선순위: 높음) ⏳
**예상 시간**: 4-6시간  
**현재 커버리지**: ~35% (validators 추가로 증가)

**작업 내용**:

#### 2.1 AuthManager 테스트
- 로그인/로그아웃 시나리오
- 에러 처리
- Firebase 인증 모킹

#### 2.2 DataManager 테스트
- Firestore 저장/로드
- LocalStorage 폴백
- 에러 처리
- 데이터 검증 통합 테스트

#### 2.3 PapsManager 테스트 (복잡한 비즈니스 로직)
- 등급 계산 로직
- 랭킹 시스템
- 데이터 검증

**필요 파일**:
- `src/modules/authManager.test.ts` (새 파일)
- `src/modules/dataManager.test.ts` (새 파일)
- `src/modules/papsManager.test.ts` (새 파일)

**효과**:
- 테스트 커버리지 50%+ 달성
- 코드 신뢰성 향상
- 리팩토링 안정성 확보

---

### 3. 에러 리포팅 시스템 도입 (우선순위: 중간) ⏳
**예상 시간**: 2-3시간  
**목적**: 프로덕션 환경에서 발생하는 에러 추적

**작업 내용**:
- Sentry 또는 유사 서비스 통합
- 에러 수집 및 분석
- 사용자 컨텍스트 정보 수집
- 에러 알림 설정

**선택 사항**:
- Sentry (추천 - 무료 티어 제공)
- Rollbar
- Bugsnag

**효과**:
- 프로덕션 에러 추적
- 문제 발생 시 빠른 대응
- 사용자 영향도 파악

---

### 4. 보안 강화 (우선순위: 중간) ⏳
**예상 시간**: 2-3시간

**작업 내용**:
- XSS 방지 재검토 (DOMPurify 사용 확인)
- 사용자 입력 검증 강화 (Zod 스키마와 연계)
- Firebase 보안 규칙 재검토
- CSRF 보호 확인

**효과**:
- 보안 취약점 제거
- 사용자 데이터 보호

---

### 5. 로깅 시스템 전환 완료 (우선순위: 낮음) ⏳
**예상 시간**: 3-4시간  
**현재 상태**: `logger.ts` 모듈 생성됨, 아직 전환 전

**작업 내용**:
- 모든 모듈의 `console.log`를 `logger`로 전환
- 프로덕션 빌드에서 불필요한 로그 제거
- 로그 레벨 관리

**효과**:
- 프로덕션 환경에서 깔끔한 콘솔
- 로그 레벨 관리 용이

---

### 6. 접근성 (A11y) 개선 (우선순위: 낮음) ⏳
**예상 시간**: 3-4시간

**작업 내용**:
- ARIA 레이블 추가
- 키보드 내비게이션 지원
- 스크린 리더 호환성
- 색상 대비 개선

**효과**:
- 접근성 향상
- 더 많은 사용자 지원

---

## 🔄 중기 개선 사항 (1-2개월)

### 7. 성능 최적화
- 번들 크기 분석 및 최적화
- 코드 스플리팅 (Manager 모듈 동적 import)
- 가상 스크롤링 (대량 데이터 렌더링)
- 디바운싱 최적화

### 8. E2E 테스트
- Playwright 또는 Cypress 도입
- 주요 사용자 시나리오 테스트

---

## 🎯 추천 다음 작업 순서

### 즉시 시작 (오늘/내일)
1. **코드 중복 제거** - 빠르게 완료 가능, 코드 품질 향상
2. **핵심 모듈 테스트 추가** - 코드 신뢰성 향상

### 이번 주 내
3. **에러 리포팅 시스템** - 프로덕션 모니터링
4. **보안 강화** - 보안 취약점 제거

### 다음 주
5. **로깅 시스템 전환** - 코드 품질 향상
6. **접근성 개선** - 사용자 경험 향상

---

## 📊 현재 코드 품질 메트릭

### 테스트
- **테스트 파일**: 6개
- **테스트 개수**: 93개 (모두 통과 ✅)
- **커버리지**: ~35% (추정)
- **목표**: 70%+

### 코드 품질
- **TypeScript 파일**: 25개
- **타입 안정성**: 약 90% (any 타입 감소)
- **중복 코드**: `setInnerHTMLSafe` 등 일부 존재
- **console 사용**: 여전히 다수 (logger로 전환 필요)

---

## 💡 작업 진행 팁

1. **작은 단계로 나누기**: 큰 작업을 작은 단위로 분할
2. **테스트 작성**: 새 기능 추가 시 테스트 병행
3. **커밋 자주 하기**: 의미 있는 단위로 커밋
4. **문서 업데이트**: 변경 사항 문서화

---

**다음 작업 권장**: 코드 중복 제거 (setInnerHTMLSafe Utils 통합)

이 작업부터 시작하시겠습니까?

